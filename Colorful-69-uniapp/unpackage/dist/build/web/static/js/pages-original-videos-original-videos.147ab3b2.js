(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-original-videos-original-videos"],{"122f":function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("b7c7"));i("bf0f"),i("c223"),i("795c");var o={data:function(){return{userInfos:{},videoList:[],loading:!1,refreshing:!1,currentPage:1,hasMore:!0,limit:10,member_id:null}},onLoad:function(){var e=this;this.getUserInfo().then((function(){e.loadVideoList()}))},onShow:function(){this.getUserInfo().then((function(){})).catch((function(e){console.error("获取用户信息失败:",e)}))},methods:{getUserInfo:function(){var e=this;return new Promise((function(t,i){var a=getApp().getCache("userInfo"),n=a?a.token:null;if(!n)return uni.showToast({title:"请先登录",icon:"none"}),void i("未登录");uni.request({url:getApp().globalData.baseUrl+"api/getuserinfo",method:"POST",header:{token:n},success:function(a){200===a.data.code?(e.userInfos=a.data.data,e.member_id=e.userInfos.id,console.log("获取用户ID:",e.userInfos.id),t(a.data.data)):(uni.showToast({title:a.data.msg||"获取用户信息失败",icon:"none"}),i(a.data.msg))},fail:function(e){uni.showToast({title:"网络错误",icon:"none"}),i(e)}})}))},goBack:function(){uni.navigateBack()},loadVideoList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loading){this.loading=!0,t&&(this.currentPage=1,this.hasMore=!0);var i=getApp().getCache("userInfo"),a=i?i.token:null;if(!a)return uni.showToast({title:"请先登录",icon:"none"}),void(this.loading=!1);uni.request({url:getApp().globalData.baseUrl+"api/video/othermember/datalist",method:"POST",header:{token:a},data:{page:this.currentPage,limit:this.limit,member_id:this.member_id},success:function(i){if(200===i.data.code){var a=i.data.data.data||[];e.videoList=t?a:[].concat((0,n.default)(e.videoList),(0,n.default)(a)),e.hasMore=a.length>=e.limit,e.hasMore&&e.currentPage++}else uni.showToast({title:i.data.msg||"获取数据失败",icon:"none"})},fail:function(e){console.error("获取原创视频列表失败:",e),uni.showToast({title:"网络错误",icon:"none"})},complete:function(){e.loading=!1,e.refreshing=!1}})}},onRefresh:function(){this.refreshing=!0,this.loadVideoList(!0)},loadMore:function(){this.hasMore&&!this.loading&&this.loadVideoList()},goToVideoDetail:function(e){uni.navigateTo({url:"/pages/video-play/video-play?id=".concat(e.id,"&url=").concat(encodeURIComponent(e.url||e.video_url||""))})},formatTime:function(e){if(!e)return"";var t=new Date(1e3*e),i=new Date,a=i-t;if(a<6e4)return"刚刚";if(a<36e5)return Math.floor(a/6e4)+"分钟前";if(a<864e5)return Math.floor(a/36e5)+"小时前";var n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(o,"-").concat(c)}}};t.default=o},"30f7":function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("7a76"),i("c9b5")},4733:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,a.default)(e)};var a=function(e){return e&&e.__esModule?e:{default:e}}(i("8d0b"))},"596e":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"original-videos-page"},[i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"back-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"back-icon",attrs:{src:"/static/home/ic_common_back.png",mode:"aspectFit"}})],1),i("v-uni-text",{staticClass:"header-title"},[e._v("原创视频")]),i("v-uni-view",{staticClass:"placeholder"})],1),i("v-uni-scroll-view",{staticClass:"scroll-container",attrs:{"scroll-y":"true","refresher-enabled":"true","refresher-triggered":e.refreshing},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.loadMore.apply(void 0,arguments)},refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.onRefresh.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"list-container"},[e.loading&&0===e.videoList.length?i("v-uni-view",{staticClass:"loading-container"},[i("v-uni-text",{staticClass:"loading-text"},[e._v("加载中...")])],1):0===e.videoList.length?i("v-uni-view",{staticClass:"empty-container"},[i("v-uni-text",{staticClass:"empty-text"},[e._v("暂无原创视频")])],1):i("v-uni-view",{staticClass:"video-list"},e._l(e.videoList,(function(t){return i("v-uni-view",{key:t.id,staticClass:"video-item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.goToVideoDetail(t)}}},[i("v-uni-image",{staticClass:"video-cover",attrs:{src:t.cover||"/static/icon/default-avatar.png",mode:"aspectFill"}}),i("v-uni-view",{staticClass:"video-info"},[i("v-uni-text",{staticClass:"video-title"},[e._v(e._s(t.name||"未知视频"))])],1)],1)})),1)],1),e.hasMore&&!e.loading?i("v-uni-view",{staticClass:"load-more"},[i("v-uni-text",{staticClass:"load-more-text"},[e._v("加载更多")])],1):e._e(),e.loading&&e.videoList.length>0?i("v-uni-view",{staticClass:"loading-more"},[i("v-uni-text",{staticClass:"loading-text"},[e._v("加载中...")])],1):e._e()],1)],1)},n=[]},"5cdb":function(e,t,i){var a=i("ac82");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("64d05d18",a,!0,{sourceMap:!1,shadowMode:!1})},"9a4e":function(e,t,i){"use strict";var a=i("5cdb"),n=i.n(a);n.a},ac82:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,".original-videos-page[data-v-b7bc44bc]{height:100vh;background-color:#eee;display:flex;flex-direction:column}\n\n/* 头部导航样式 */.header[data-v-b7bc44bc]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #e0e0e0;position:-webkit-sticky;position:sticky;top:0;z-index:100}.back-btn[data-v-b7bc44bc]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-b7bc44bc]{width:%?40?%;height:%?40?%}.header-title[data-v-b7bc44bc]{font-size:%?36?%;color:#333}.placeholder[data-v-b7bc44bc]{width:%?60?%}\n\n/* 滚动容器 */.scroll-container[data-v-b7bc44bc]{flex:1;height:100%}.list-container[data-v-b7bc44bc]{padding:%?20?% 0}.loading-container[data-v-b7bc44bc],\n.empty-container[data-v-b7bc44bc]{padding:%?100?% 0;text-align:center}.loading-text[data-v-b7bc44bc],\n.empty-text[data-v-b7bc44bc]{font-size:%?28?%;color:#999}\n\n/* 视频列表样式 */.video-list[data-v-b7bc44bc]{display:flex;flex-direction:column;gap:%?10?%}.video-item[data-v-b7bc44bc]{display:flex;align-items:center;padding:%?30?%;background-color:#fff}.video-cover[data-v-b7bc44bc]{width:%?120?%;height:%?120?%;border-radius:%?10?%;margin-right:%?30?%;border:%?2?% solid #e0e0e0}.video-info[data-v-b7bc44bc]{flex:1;display:flex;flex-direction:column}.video-title[data-v-b7bc44bc]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?10?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;line-height:1.4}.video-meta[data-v-b7bc44bc]{display:flex;flex-direction:column;gap:%?15?%}.author-info[data-v-b7bc44bc]{display:flex;align-items:center;gap:%?15?%}.author-avatar[data-v-b7bc44bc]{width:%?50?%;height:%?50?%;border-radius:%?25?%;border:%?1?% solid #e0e0e0}.author-name[data-v-b7bc44bc]{font-size:%?26?%;color:#666}.video-stats[data-v-b7bc44bc]{display:flex;align-items:center;gap:%?30?%}.stat-item[data-v-b7bc44bc]{display:flex;align-items:center;gap:%?8?%}.stat-icon[data-v-b7bc44bc]{width:%?30?%;height:%?30?%}.stat-text[data-v-b7bc44bc]{font-size:%?24?%;color:#999}.video-time[data-v-b7bc44bc]{font-size:%?24?%;color:#999;margin-top:%?10?%}\n\n/* 加载更多 */.load-more[data-v-b7bc44bc],\n.loading-more[data-v-b7bc44bc]{padding:%?30?% 0;text-align:center}.load-more-text[data-v-b7bc44bc]{font-size:%?28?%;color:#666}",""]),e.exports=t},b7c7:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)||(0,n.default)(e)||(0,o.default)(e)||(0,c.default)()};var a=r(i("4733")),n=r(i("d14d")),o=r(i("5d6b")),c=r(i("30f7"));function r(e){return e&&e.__esModule?e:{default:e}}},e6c7:function(e,t,i){"use strict";i.r(t);var a=i("596e"),n=i("ef85");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("9a4e");var c=i("828b"),r=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"b7bc44bc",null,!1,a["a"],void 0);t["default"]=r.exports},ef85:function(e,t,i){"use strict";i.r(t);var a=i("122f"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a}}]);