(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-game-recharge-game-recharge"],{2926:function(e,t,n){var a=n("5ad3");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("967d").default;o("29634ed1",a,!0,{sourceMap:!1,shadowMode:!1})},"3a14":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("4626"),n("5ac7"),n("e838"),n("c9b5"),n("bf0f"),n("ab80"),n("c223");var a={data:function(){return{gameId:"",gameName:"",gameImg:"",userInfo:{},transferAmount:"",quickAmounts:[10,50,100,200,500,1e3]}},computed:{},onLoad:function(e){this.gameId=e.gameId||"",this.gameName=decodeURIComponent(e.gameName||""),this.gameImg=decodeURIComponent(e.gameImg||""),this.userInfo=getApp().getCache("userInfo")||{},this.getUserInfo()},onShow:function(){var e=getApp().getCache("isLogin");getApp().isEmpty(e)&&uni.navigateTo({url:"/pages/login/login"})},methods:{goBack:function(){uni.navigateBack()},getUserInfo:function(){var e=this,t={token:e.userInfo.token};getApp().getData("api/getuserinfo",t,(function(t){200===t.code&&(e.userInfo=t.data,getApp().setCache("userInfo",t.data))}),(function(e){console.error("获取用户信息失败:",e)}))},onAmountInput:function(e){var t=e.detail.value;if(t.includes(".")){var n=t.split(".");n[1]&&n[1].length>2&&(t=n[0]+"."+n[1].substring(0,2),this.transferAmount=t)}},setMaxAmount:function(){var e=parseFloat(this.userInfo.money||0);this.transferAmount=e.toFixed(2)},selectQuickAmount:function(e){this.transferAmount=e.toString()},handleTransfer:function(){parseFloat(this.transferAmount),parseFloat(this.userInfo.money||0);this.createOrder()},createOrder:function(){var e=this,t={token:e.userInfo.token,type:"game_recharge",info_id:e.gameId,amount:e.transferAmount};getApp().getData("api/order/create",t,(function(t){200===t.code?e.processPayment(t.data):uni.showModal({title:"提示",content:t.msg||"创建订单失败",showCancel:!1})}),(function(e){uni.showModal({title:"提示",content:"网络错误，请稍后重试",showCancel:!1}),console.error("创建订单网络错误:",e)}))},processPayment:function(e){var t=this,n={token:t.userInfo.token,id:e,paytype:0,type:"game_recharge"};getApp().getData("api/order/pay",n,(function(e){200===e.code?(uni.showModal({title:"转账成功",content:"已成功转账¥".concat(t.transferAmount,"到").concat(t.gameName),showCancel:!1,success:function(){uni.navigateBack()}}),t.getUserInfo()):uni.showModal({title:"转账失败",content:e.msg||"转账失败，请稍后重试",showCancel:!1})}),(function(e){uni.showModal({title:"转账失败",content:"网络错误，请稍后重试",showCancel:!1}),console.error("支付网络错误:",e)}))}}};t.default=a},"5ad3":function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-54debee5]{background-color:#f8f9fa}body.?%PAGE?%[data-v-54debee5]{background-color:#f8f9fa}.game-recharge-page[data-v-54debee5]{height:100vh;display:flex;flex-direction:column}\n/* 头部样式 */.header[data-v-54debee5]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #f0f0f0;position:-webkit-sticky;position:sticky;top:0;z-index:100}.back-btn[data-v-54debee5]{width:%?40?%;height:%?40?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-54debee5]{font-size:%?40?%;color:#333;font-weight:700}.header-title[data-v-54debee5]{font-size:%?36?%;font-weight:600;color:#333}.placeholder[data-v-54debee5]{width:%?40?%;height:%?40?%}\n/* 游戏信息 */.game-info[data-v-54debee5]{display:flex;align-items:center;padding:%?30?%;background-color:#fff;margin:%?20?%;border-radius:%?12?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05)}.game-icon[data-v-54debee5]{width:%?80?%;height:%?80?%;border-radius:%?10?%;margin-right:%?20?%}.game-name[data-v-54debee5]{font-size:%?32?%;font-weight:600;color:#333}\n/* 充值表单 */.recharge-form[data-v-54debee5]{background-color:#fff;margin:0 %?20?%;border-radius:%?12?%;padding:%?40?% %?30?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05)}\n/* 账户余额 */.balance-info[data-v-54debee5]{display:flex;align-items:center;padding:%?30?%;border-radius:%?12?%;height:%?40?%;line-height:%?40?%;font-size:%?24?%;margin-bottom:%?40?%;color:#999}\n/* 转账金额输入 */.amount-input-section[data-v-54debee5]{margin-bottom:%?40?%}.input-label[data-v-54debee5]{font-size:%?28?%;color:#333;font-weight:700;margin-bottom:%?20?%;display:block}.input-container[data-v-54debee5]{position:relative;display:flex;align-items:center;gap:%?15?%}.amount-input[data-v-54debee5]{flex:1;height:%?80?%;padding:0 %?20?%;border-bottom:%?1?% solid #999;font-size:%?32?%;color:#333;background-color:#fff}.amount-input[data-v-54debee5]:focus{border-color:#007bff}.currency-symbol[data-v-54debee5]{font-size:%?36?%;color:#666;font-weight:700}.max-amount-btn[data-v-54debee5]{padding:%?15?% %?25?%;border-radius:%?6?%;color:#fd2450;transition:all .3s}.max-amount-btn[data-v-54debee5]:active{-webkit-transform:scale(.95);transform:scale(.95)}.max-text[data-v-54debee5]{font-size:%?26?%;font-weight:500}\n/* 快捷金额选择 */.quick-amounts[data-v-54debee5]{margin-bottom:%?40?%}.quick-label[data-v-54debee5]{font-size:%?28?%;color:#333;font-weight:500;margin-bottom:%?20?%;display:block}.quick-buttons[data-v-54debee5]{display:flex;flex-wrap:wrap;gap:%?15?%}.quick-btn[data-v-54debee5]{padding:%?20?% %?30?%;border:%?2?% solid #e9ecef;border-radius:%?8?%;background-color:#fff;transition:all .3s}.quick-btn.selected[data-v-54debee5]{background-color:#fc1b5e;border-color:#fc1b5e}.quick-btn.selected .quick-btn-text[data-v-54debee5]{color:#fff}.quick-btn[data-v-54debee5]:active{-webkit-transform:scale(.95);transform:scale(.95)}.quick-btn-text[data-v-54debee5]{font-size:%?26?%;color:#333;font-weight:500}\n/* 转账按钮 */.transfer-btn-container[data-v-54debee5]{padding:%?30?% %?20?%}.transfer-btn[data-v-54debee5]{width:100%;height:%?88?%;background-color:#fc1b5e;border-radius:%?15?%;border:none;display:flex;align-items:center;justify-content:center;transition:all .3s}.transfer-btn[data-v-54debee5]:disabled{background-color:#fc1b5e;opacity:.5}.transfer-btn-text[data-v-54debee5]{font-size:%?32?%;color:#fff;font-weight:600}.transfer-tips[data-v-54debee5]{color:#fd313d;padding:%?30?%;font-weight:700;font-size:%?24?%}',""]),e.exports=t},"93a8":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"game-recharge-page"},[n("v-uni-view",{staticClass:"header"},[n("v-uni-view",{staticClass:"back-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"back-icon"},[e._v("‹")])],1),n("v-uni-text",{staticClass:"header-title"},[e._v("游戏转账")]),n("v-uni-view",{staticClass:"placeholder"})],1),n("v-uni-view",{staticClass:"recharge-form"},[n("v-uni-view",{staticClass:"amount-input-section"},[n("v-uni-text",{staticClass:"input-label"},[e._v("转账金额")]),n("v-uni-view",{staticClass:"input-container"},[n("v-uni-text",{staticClass:"currency-symbol"},[e._v("¥")]),n("v-uni-input",{staticClass:"amount-input",attrs:{type:"digit",placeholder:"请输入转账金额"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.onAmountInput.apply(void 0,arguments)}},model:{value:e.transferAmount,callback:function(t){e.transferAmount=t},expression:"transferAmount"}})],1),n("v-uni-view",{staticClass:"u-flex u-flex-between"},[n("v-uni-view",{staticClass:"balance-info"},[n("v-uni-text",{staticClass:"balance-label"},[e._v("账户余额：")]),n("v-uni-text",{staticClass:"balance-amount"},[e._v(e._s(e.userInfo.money||"0.00"))])],1),n("v-uni-view",{staticClass:"max-amount-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setMaxAmount.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"max-text"},[e._v("最大金额")])],1)],1)],1),n("v-uni-view",{staticClass:"quick-amounts"},[n("v-uni-text",{staticClass:"quick-label"},[e._v("快捷金额")]),n("v-uni-view",{staticClass:"quick-buttons"},e._l(e.quickAmounts,(function(t){return n("v-uni-view",{key:t,class:["quick-btn",{selected:e.transferAmount==t}],on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.selectQuickAmount(t)}}},[n("v-uni-text",{staticClass:"quick-btn-text"},[e._v(e._s(t))])],1)})),1)],1)],1),n("v-uni-view",{staticClass:"transfer-btn-container"},[n("v-uni-button",{staticClass:"transfer-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTransfer.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"transfer-btn-text"},[e._v("转账")])],1)],1),n("v-uni-view",{staticClass:"transfer-tips"},[n("v-uni-view",{},[e._v("提示")]),n("v-uni-view",{},[e._v("1、本次转账为账户余额转入游戏余额。")])],1)],1)},o=[]},c2fa:function(e,t,n){"use strict";n.r(t);var a=n("93a8"),o=n("c3eb");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("eaf4");var s=n("828b"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"54debee5",null,!1,a["a"],void 0);t["default"]=r.exports},c3eb:function(e,t,n){"use strict";n.r(t);var a=n("3a14"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},eaf4:function(e,t,n){"use strict";var a=n("2926"),o=n.n(a);o.a}}]);