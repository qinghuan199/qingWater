(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-promotion-promotion"],{4047:function(t,e,o){"use strict";var i=o("d7e7"),a=o.n(i);a.a},7876:function(t,e,o){"use strict";o.r(e);var i=o("cccc"),a=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},"8c51":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"promotion-page"},[o("v-uni-view",{staticClass:"header"},[o("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[o("v-uni-image",{staticClass:"back-icon",attrs:{src:"/static/home/ic_common_back.png",mode:"aspectFit"}})],1),o("v-uni-text",{staticClass:"title"},[t._v("邀请分享")]),o("v-uni-view",{staticClass:"placeholder"})],1),o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{staticClass:"title-section"},[o("v-uni-text",{staticClass:"main-title"},[t._v("邀请一个用户充值即可无限看5天")]),o("v-uni-text",{staticClass:"main-title"},[t._v("邀请的用户充值返现40%")])],1),o("v-uni-view",{staticClass:"invite-card"},[o("v-uni-view",{staticClass:"brand-section"},[o("v-uni-image",{staticClass:"logo",attrs:{src:"/static/logo.png",mode:"aspectFit"}}),o("v-uni-text",{staticClass:"brand-name"},[t._v("69传媒")])],1),o("v-uni-view",{staticClass:"qrcode-section"},[t.userInfo.app_download_url?o("v-uni-canvas",{staticClass:"qrcode-canvas",style:{width:t.qrcodeSize+"px",height:t.qrcodeSize+"px"},attrs:{"canvas-id":"qrcode"}}):o("v-uni-text",{staticClass:"no-url-text"},[t._v("暂无下载链接")])],1),o("v-uni-view",{staticClass:"invite-code-box"},[o("v-uni-text",{staticClass:"invite-code-label"},[t._v("你的邀请码:")]),o("v-uni-text",{staticClass:"invite-code-value"},[t._v(t._s(t.userInfo.invite_code||"暂无邀请码"))])],1)],1),o("v-uni-view",{staticClass:"copy-section"},[o("v-uni-button",{staticClass:"copy-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyInviteCode.apply(void 0,arguments)}}},[t._v("复制链接分享")])],1),o("v-uni-view",{staticClass:"promotion-image-section"},[o("v-uni-image",{staticClass:"promotion-image",attrs:{src:"/static/icon/14.png",mode:"widthFix"}})],1)],1)],1)},a=[]},cccc:function(t,e,o){"use strict";o("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("7a76"),o("c9b5"),o("c223");var i={data:function(){return{userInfo:{},qrcodeSize:200}},onLoad:function(){this.getUserInfo()},methods:{goBack:function(){uni.navigateBack()},getUserInfo:function(){var t=this,e=getApp().getCache("userInfo"),o=e?e.token:null;o?uni.request({url:getApp().globalData.baseUrl+"api/getuserinfo",method:"POST",header:{token:o},success:function(e){200===e.data.code?(t.userInfo=e.data.data,t.userInfo.app_download_url&&t.$nextTick((function(){t.generateQRCode()}))):uni.showToast({title:e.data.msg||"获取用户信息失败",icon:"none"})},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}}):uni.showToast({title:"请先登录",icon:"none"})},copyInviteCode:function(){if(this.userInfo.invite_code){var t="".concat(this.userInfo.invite_code),e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{var o=document.execCommand("copy");if(!o)throw new Error("复制失败");uni.showToast({title:"复制成功",icon:"success"})}catch(i){console.error("复制失败:",i),uni.showToast({title:"复制失败",icon:"none"})}document.body.removeChild(e)}else uni.showToast({title:"暂无邀请码",icon:"none"})},generateQRCode:function(){if(this.userInfo.app_download_url){var t=uni.createCanvasContext("qrcode",this);this.drawQRCodeWithAPI(t)}},drawQRCodeWithAPI:function(t){var e=this,o="https://api.qrserver.com/v1/create-qr-code/?size=".concat(this.qrcodeSize,"x").concat(this.qrcodeSize,"&data=").concat(encodeURIComponent(this.userInfo.app_download_url));uni.downloadFile({url:o,success:function(o){200===o.statusCode?(t.drawImage(o.tempFilePath,0,0,e.qrcodeSize,e.qrcodeSize),t.draw()):e.drawTextQRCode(t)},fail:function(){e.drawTextQRCode(t)}})},drawTextQRCode:function(t){t.setFillStyle("#f0f0f0"),t.fillRect(0,0,this.qrcodeSize,this.qrcodeSize),t.setFillStyle("#333"),t.setFontSize(16),t.setTextAlign("center"),t.fillText("二维码",this.qrcodeSize/2,this.qrcodeSize/2-10),t.fillText("生成中...",this.qrcodeSize/2,this.qrcodeSize/2+10),t.draw()}}};e.default=i},d7e7:function(t,e,o){var i=o("fa35");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("967d").default;a("8fa7a93e",i,!0,{sourceMap:!1,shadowMode:!1})},e129:function(t,e,o){"use strict";o.r(e);var i=o("8c51"),a=o("7876");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("4047");var c=o("828b"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"5464ee93",null,!1,i["a"],void 0);e["default"]=s.exports},fa35:function(t,e,o){var i=o("c86c");e=i(!1),e.push([t.i,".promotion-page[data-v-5464ee93]{background-color:#f5f5f5;min-height:100vh}.header[data-v-5464ee93]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #eee}.back-btn[data-v-5464ee93]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-5464ee93]{width:%?40?%;height:%?40?%}.title[data-v-5464ee93]{font-size:%?36?%;color:#333}.placeholder[data-v-5464ee93]{width:%?60?%}.content[data-v-5464ee93]{padding:%?40?% %?30?%}\n\n/* 标题区域 */.title-section[data-v-5464ee93]{text-align:center;margin-bottom:%?40?%}.main-title[data-v-5464ee93]{font-size:%?42?%;font-weight:700;color:#333;display:block;margin-bottom:%?20?%}.sub-title[data-v-5464ee93]{font-size:%?32?%;color:#666;display:block}\n\n/* 邀请码展示框 */.invite-card[data-v-5464ee93]{background-color:#fff;border-radius:%?20?%;padding:%?40?%;margin-bottom:%?40?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.1);border:%?2?% solid #bd9c8d}\n\n/* Logo和品牌名 */.brand-section[data-v-5464ee93]{display:flex;align-items:center;justify-content:center;margin-bottom:%?30?%}.logo[data-v-5464ee93]{width:%?80?%;height:%?80?%;margin-right:%?20?%}.brand-name[data-v-5464ee93]{font-size:%?48?%;font-weight:700;color:#333}\n\n/* 二维码区域 */.qrcode-section[data-v-5464ee93]{margin-bottom:%?30?%;text-align:center}.qrcode-title[data-v-5464ee93]{font-size:%?32?%;color:#333;font-weight:700;margin-bottom:%?20?%;display:block}.qrcode-canvas[data-v-5464ee93]{border:%?2?% solid #e0e0e0;border-radius:%?10?%;margin:0 auto;display:block}.no-url-text[data-v-5464ee93]{font-size:%?28?%;color:#999;padding:%?40?%;background-color:#f8f9fa;border-radius:%?10?%;display:block}\n\n/* 邀请码显示框 */.invite-code-box[data-v-5464ee93]{width:%?500?%;margin:0 auto;background-color:#bd9c8d;padding:%?40?% %?30?%;border-radius:%?20?%;text-align:center}.invite-code-label[data-v-5464ee93]{font-size:%?32?%;color:#fff;margin-bottom:%?10?%}.invite-code-value[data-v-5464ee93]{font-size:%?36?%;color:#fff;letter-spacing:%?2?%}\n\n/* 复制按钮 */.copy-section[data-v-5464ee93]{text-align:center;margin-bottom:%?40?%}.copy-btn[data-v-5464ee93]{background-color:#555;color:#fff;border:none;border-radius:%?20?%;padding:%?20?%;width:%?350?%;margin:0 auto;font-size:%?32?%;box-shadow:0 %?4?% %?15?% rgba(0,0,0,.3)}.copy-btn[data-v-5464ee93]:active{background-color:#0056b3;-webkit-transform:scale(.98);transform:scale(.98)}\n\n/* 推广图片 */.promotion-image-section[data-v-5464ee93]{text-align:center}.promotion-image[data-v-5464ee93]{width:100%;max-width:%?320?%;height:auto;border-radius:%?15?%;box-shadow:0 %?4?% %?15?% rgba(0,0,0,.1)}",""]),t.exports=e}}]);