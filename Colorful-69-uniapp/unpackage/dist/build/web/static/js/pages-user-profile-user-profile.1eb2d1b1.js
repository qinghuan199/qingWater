(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-profile-user-profile"],{"2dbd":function(t,e,a){"use strict";var i=a("9e75"),n=a.n(i);n.a},"30f7":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("7a76"),a("c9b5")},"3de4":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("d4b5");var n=i(a("b7c7")),o={data:function(){return{userId:"",userInfo:{},worksList:[],loading:!1,currentPage:1,hasMore:!0,limit:10,followLoading:!1,scrollTop:0,refreshing:!1}},onLoad:function(t){t.id&&(this.userId=t.id,this.getUserInfo(),this.getWorksList())},onShow:function(){getApp().getCache("isLogin")||uni.navigateTo({url:"/pages/login/login"})},methods:{goBack:function(){uni.navigateBack()},getUserInfo:function(){var t=this,e=getApp().getCache("userInfo"),a=e?e.token:null;a?uni.request({url:getApp().globalData.baseUrl+"api/getotheruserinfo",method:"POST",header:{token:a},data:{member_id:this.userId},success:function(e){200===e.data.code?t.userInfo=e.data.data||{}:uni.showToast({title:e.data.msg||"获取用户信息失败",icon:"none"})},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}}):uni.showToast({title:"请先登录",icon:"none"})},getWorksList:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loading){var i=null===(t=getApp().getCache("userInfo"))||void 0===t?void 0:t.token;i?(this.loading=!0,a&&(this.currentPage=1,this.refreshing=!0),uni.request({url:getApp().globalData.baseUrl+"api/video/othermember/datalist",method:"POST",header:{token:i},data:{page:this.currentPage,limit:this.limit,member_id:this.userId},success:function(t){if(200===t.data.code){var i=t.data.data;e.worksList=a?i.data||[]:[].concat((0,n.default)(e.worksList),(0,n.default)(i.data||[])),e.hasMore=e.currentPage<i.last_page}},complete:function(){e.loading=!1,e.refreshing=!1,a&&uni.stopPullDownRefresh()}})):uni.showToast({title:"请先登录",icon:"none"})}},loadMore:function(){this.hasMore&&!this.loading&&(this.currentPage++,this.getWorksList())},onRefresh:function(){this.getWorksList(!0)},saveScrollPosition:function(t){this.scrollTop=t.detail.scrollTop},toggleFollow:function(){var t,e=this;if(!this.followLoading){var a=null===(t=getApp().getCache("userInfo"))||void 0===t?void 0:t.token;if(a){this.followLoading=!0;var i=this.userInfo.is_follow?"api/member/unfollow":"api/member/follow";uni.request({url:getApp().globalData.baseUrl+i,method:"POST",header:{token:a},data:{follow_id:this.userId},success:function(t){200===t.data.code&&(e.userInfo.is_follow=!e.userInfo.is_follow,e.userInfo.fans_num=e.userInfo.is_follow?(e.userInfo.fans_num||0)+1:Math.max((e.userInfo.fans_num||0)-1,0),uni.showToast({title:t.data.msg,icon:"none"}))},complete:function(){e.followLoading=!1}})}else uni.showToast({title:"请先登录",icon:"none"})}},goToVideoDetail:function(t){uni.navigateTo({url:"/pages/short-video/short-video?index="+t+"&videoList="+encodeURIComponent(JSON.stringify(this.worksList))})}}};e.default=o},4733:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,i.default)(t)};var i=function(t){return t&&t.__esModule?t:{default:t}}(a("8d0b"))},8025:function(t,e,a){"use strict";a.r(e);var i=a("faf5"),n=a("9298");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("2dbd");var s=a("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"17c326d2",null,!1,i["a"],void 0);e["default"]=r.exports},9298:function(t,e,a){"use strict";a.r(e);var i=a("3de4"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"9e75":function(t,e,a){var i=a("e5ad");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("64d20918",i,!0,{sourceMap:!1,shadowMode:!1})},b7c7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)||(0,n.default)(t)||(0,o.default)(t)||(0,s.default)()};var i=r(a("4733")),n=r(a("d14d")),o=r(a("5d6b")),s=r(a("30f7"));function r(t){return t&&t.__esModule?t:{default:t}}},e5ad:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".user-profile-page[data-v-17c326d2]{background-color:#f5f5f5;height:100vh;display:flex;flex-direction:column}.top-container[data-v-17c326d2]{background-image:url(/static/home/ic_game_class_normal.png);background-size:cover;background-position:50%;flex-shrink:0}.header[data-v-17c326d2]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:initial}.back-btn[data-v-17c326d2]{padding:%?10?%}.width-40[data-v-17c326d2]{width:%?40?%;height:%?40?%}.placeholder[data-v-17c326d2]{width:%?60?%}.user-header[data-v-17c326d2]{padding:%?40?% %?30?%}.user-info[data-v-17c326d2]{display:flex;align-items:center;justify-content:space-between}.user-avatar[data-v-17c326d2]{width:%?120?%;height:%?120?%;border-radius:%?60?%;margin-right:%?30?%}.user-name[data-v-17c326d2]{flex:1;font-size:%?36?%;font-weight:700;color:#333}.follow-btn[data-v-17c326d2]{width:%?130?%;height:%?45?%;line-height:%?45?%;text-align:center;border-radius:%?10?%;background-color:#ff6b6b;border:%?2?% solid #ff6b6b}.follow-btn.followed[data-v-17c326d2]{background-color:#fff;border-color:#ddd}.follow-text[data-v-17c326d2]{font-size:%?24?%;color:#fff}.follow-btn.followed .follow-text[data-v-17c326d2]{color:#666}.stats-container[data-v-17c326d2]{display:flex;padding:%?30?%;margin-bottom:%?20?%}.stats-item[data-v-17c326d2]{display:flex;margin-right:%?30?%;align-items:baseline}.stats-label[data-v-17c326d2]{font-size:%?28?%;color:#666}.stats-number[data-v-17c326d2]{font-size:%?32?%;font-weight:700;color:#333;margin-left:%?5?%}.works-container[data-v-17c326d2]{flex:1;background-color:#fff;overflow:hidden}.list-container[data-v-17c326d2]{padding:0}.loading-container[data-v-17c326d2],\n.empty-container[data-v-17c326d2]{display:flex;justify-content:center;align-items:center;height:%?200?%}.loading-text[data-v-17c326d2],\n.empty-text[data-v-17c326d2]{font-size:%?28?%;color:#999}.grid-container[data-v-17c326d2]{display:flex;flex-wrap:wrap;justify-content:space-between}.grid-item[data-v-17c326d2]{width:calc(50% - %?10?%);margin-bottom:%?20?%;border-radius:%?15?%;overflow:hidden}.grid-cover[data-v-17c326d2]{width:100%;height:%?350?%;border-radius:%?10?%}.grid-info[data-v-17c326d2]{padding:%?10?%;display:flex;justify-content:space-between;align-items:center}.grid-title[data-v-17c326d2]{font-size:%?28?%;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.grid-stats[data-v-17c326d2]{display:flex;justify-content:flex-end}.stat-item[data-v-17c326d2]{display:flex;align-items:center}.stat-icon[data-v-17c326d2]{width:%?24?%;height:%?24?%;margin-right:%?8?%}.stat-num[data-v-17c326d2]{font-size:%?24?%;color:#666}.loading-more[data-v-17c326d2],\n.no-more[data-v-17c326d2]{padding:%?30?%;text-align:center}.loading-more-text[data-v-17c326d2],\n.no-more-text[data-v-17c326d2]{font-size:%?28?%;color:#999}",""]),t.exports=e},faf5:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user-profile-page"},[a("v-uni-view",{staticClass:"top-container"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"width-40",attrs:{src:"/static/home/ic_common_back.png",mode:"widthFix"}})],1),a("v-uni-view",{staticClass:"placeholder"})],1),a("v-uni-view",{staticClass:"user-header"},[a("v-uni-view",{staticClass:"user-info"},[a("v-uni-image",{staticClass:"user-avatar",attrs:{src:t.userInfo.header_img||"/static/icon/default-avatar.png",mode:"aspectFill"}}),a("v-uni-text",{staticClass:"user-name"},[t._v(t._s(t.userInfo.username||t.userInfo.name||"未知用户"))]),a("v-uni-view",{staticClass:"follow-btn",class:{followed:t.userInfo.is_follow},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleFollow.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"follow-text"},[t._v(t._s(t.userInfo.is_follow?"已关注":"关注"))])],1)],1)],1),a("v-uni-view",{staticClass:"stats-container"},[a("v-uni-view",{staticClass:"stats-item"},[a("v-uni-text",{staticClass:"stats-label"},[t._v("关注")]),a("v-uni-text",{staticClass:"stats-number"},[t._v(t._s(t.userInfo.follows_num||0))])],1),a("v-uni-view",{staticClass:"stats-item"},[a("v-uni-text",{staticClass:"stats-label"},[t._v("粉丝")]),a("v-uni-text",{staticClass:"stats-number"},[t._v(t._s(t.userInfo.fans_num||0))])],1),a("v-uni-view",{staticClass:"stats-item"},[a("v-uni-text",{staticClass:"stats-label"},[t._v("作品")]),a("v-uni-text",{staticClass:"stats-number"},[t._v(t._s(t.userInfo.original_num||0))])],1)],1)],1),a("v-uni-scroll-view",{staticClass:"works-container",attrs:{"scroll-y":!0,"scroll-top":t.scrollTop,"refresher-enabled":!0,"refresher-triggered":t.refreshing},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.saveScrollPosition.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"list-container"},[t.loading&&0===t.worksList.length?a("v-uni-view",{staticClass:"loading-container"},[a("v-uni-text",{staticClass:"loading-text"},[t._v("加载中...")])],1):0===t.worksList.length?a("v-uni-view",{staticClass:"empty-container"},[a("v-uni-text",{staticClass:"empty-text"},[t._v("暂无作品")])],1):a("v-uni-view",{staticClass:"grid-container"},t._l(t.worksList,(function(e,i){return a("v-uni-view",{key:e.id,staticClass:"grid-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToVideoDetail(i)}}},[a("v-uni-image",{staticClass:"grid-cover",attrs:{src:e.cover||e.header_img||"/static/icon/default-avatar.png",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"grid-info"},[a("v-uni-text",{staticClass:"grid-title"},[t._v(t._s(e.name||"未知视频"))]),a("v-uni-view",{staticClass:"grid-stats"},[a("v-uni-view",{staticClass:"stat-item"},[a("v-uni-image",{staticClass:"stat-icon",attrs:{src:"/static/home/ic_video_collect_normal.png",mode:"aspectFit"}}),a("v-uni-text",{staticClass:"stat-num"},[t._v(t._s(e.likenumber||"0"))])],1)],1)],1)],1)})),1)],1),t.loading&&t.worksList.length>0?a("v-uni-view",{staticClass:"loading-more"},[a("v-uni-text",{staticClass:"loading-more-text"},[t._v("加载中...")])],1):!t.hasMore&&t.worksList.length>0?a("v-uni-view",{staticClass:"no-more"},[a("v-uni-text",{staticClass:"no-more-text"},[t._v("没有更多了")])],1):t._e()],1)],1)},n=[]}}]);