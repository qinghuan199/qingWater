(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-order"],{3698:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.order-page[data-v-42e8e056]{background-color:#fff;min-height:100vh;display:flex;flex-direction:column}\n/* 头部导航 */.header[data-v-42e8e056]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #f0f0f0;position:-webkit-sticky;position:sticky;top:0;z-index:10;height:%?88?%;box-sizing:border-box}.back-btn[data-v-42e8e056]{width:%?40?%;height:%?40?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-42e8e056]{font-size:%?40?%;color:#333;font-weight:700}.header-title[data-v-42e8e056]{font-size:%?36?%;font-weight:600;color:#333}.placeholder[data-v-42e8e056]{width:%?40?%;height:%?40?%}\n/* 订单类型选择 */.order-types[data-v-42e8e056]{background-color:#eee;border-bottom:%?1?% solid #f0f0f0;position:-webkit-sticky;position:sticky;top:%?88?%;z-index:10}.type-list[data-v-42e8e056]{display:flex;padding:0 %?30?%;white-space:nowrap}.type-item[data-v-42e8e056]{padding:%?30?% %?40?%;margin-right:%?20?%;position:relative;transition:all .3s}.type-item.active[data-v-42e8e056]{color:#fd313d}.type-item.active[data-v-42e8e056]::after{content:"";position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?40?%;height:%?4?%;border-radius:%?2?%}.type-text[data-v-42e8e056]{font-size:%?32?%;color:#666}.type-item.active .type-text[data-v-42e8e056]{color:#fd313d;font-weight:600}\n/* 订单列表 */.order-list[data-v-42e8e056]{flex:1;padding:%?20?% %?30?%}.loading-state[data-v-42e8e056],\n.empty-state[data-v-42e8e056]{padding:%?100?% 0;text-align:center}.loading-text[data-v-42e8e056],\n.empty-text[data-v-42e8e056]{font-size:%?28?%;color:#999}.order-item[data-v-42e8e056]{background-color:#eee;border-radius:%?12?%;margin-bottom:%?10?%;padding:%?30?%;width:%?690?%}\n/* 订单主体 */.order-main[data-v-42e8e056]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:%?20?%;gap:%?20?%}.order-left[data-v-42e8e056]{flex:1;min-width:0;overflow:hidden}.info-text[data-v-42e8e056]{font-size:%?28?%;color:#999;display:block;margin-bottom:%?8?%;word-wrap:break-word;word-break:break-all;line-height:1.4}.order-right[data-v-42e8e056]{flex-shrink:0;max-width:%?200?%}.status-text[data-v-42e8e056]{font-size:%?32?%;padding:%?8?% %?12?%;border-radius:%?20?%;color:#fc1765;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;display:inline-block}.status-processing[data-v-42e8e056]{color:#fc1765}.status-success[data-v-42e8e056]{color:#fc1765}.status-failed[data-v-42e8e056]{color:#fc1765}.status-refund[data-v-42e8e056]{color:#fc1765}\n/* 订单内容 */.order-content[data-v-42e8e056]{margin-bottom:%?20?%;word-wrap:break-word;word-break:break-all}.product-info[data-v-42e8e056]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:%?20?%;gap:%?20?%}.product-name[data-v-42e8e056]{font-size:%?32?%;color:#333;font-weight:600;flex:1;min-width:0;word-wrap:break-word;word-break:break-all;line-height:1.4}.product-price[data-v-42e8e056]{font-size:%?32?%;color:#ff6b35;font-weight:600;flex-shrink:0;white-space:nowrap}.extra-fields[data-v-42e8e056]{margin-bottom:%?20?%}.field-item[data-v-42e8e056]{display:flex;margin-bottom:%?10?%;align-items:flex-start;gap:%?10?%}.field-label[data-v-42e8e056]{font-size:%?28?%;color:#666;width:%?160?%;flex-shrink:0;white-space:nowrap}.field-value[data-v-42e8e056]{font-size:%?28?%;color:#333;flex:1;min-width:0;word-wrap:break-word;word-break:break-all;line-height:1.4}.payment-info[data-v-42e8e056]{text-align:right}.payment-method[data-v-42e8e056]{font-size:%?24?%;color:#999}\n/* 订单操作按钮 */.order-actions[data-v-42e8e056]{display:flex;justify-content:flex-start;gap:%?20?%;flex-wrap:wrap;margin-top:%?20?%;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}.action-btn[data-v-42e8e056]{padding:%?16?% %?32?%;border-radius:%?40?%;border:%?2?% solid;transition:all .3s;flex-shrink:0;min-width:%?120?%;text-align:center;background-color:#fc1765}.cancel-btn[data-v-42e8e056]{border-color:#fc1765;background-color:#fc1765}.cancel-btn .btn-text[data-v-42e8e056]{color:#fff;font-size:%?28?%}.pay-btn[data-v-42e8e056]{border-color:#fc1765;background-color:#fc1765}.pay-btn .btn-text[data-v-42e8e056]{color:#fff;font-size:%?28?%}\n/* 加载更多 */.load-more[data-v-42e8e056],\n.no-more[data-v-42e8e056]{padding:%?40?% 0;text-align:center}.load-text[data-v-42e8e056],\n.no-more-text[data-v-42e8e056]{font-size:%?28?%;color:#999}',""]),t.exports=e},"3aa0":function(t,e,a){"use strict";var i=a("dc17"),n=a.n(i);n.a},"59b5":function(t,e,a){"use strict";a.r(e);var i=a("8d69"),n=a("eb7c");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("3aa0");var o=a("828b"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"42e8e056",null,!1,i["a"],void 0);e["default"]=r.exports},"7c68":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa77"),a("bf0f"),a("c223"),a("795c"),a("4626");var i={data:function(){return{selectedType:"normal",orderList:[],currentPage:1,totalPages:1,lastPage:1,hasMore:!0,loading:!1}},onLoad:function(){this.loadOrderList()},onPullDownRefresh:function(){this.currentPage=1,this.orderList=[],this.hasMore=!0,this.loadOrderList((function(){uni.stopPullDownRefresh()}))},onReachBottom:function(){this.loadMore()},onShow:function(){var t=getApp().getCache("isLogin");getApp().isEmpty(t)&&uni.navigateTo({url:"/pages/login/login"})},methods:{goBack:function(){uni.navigateBack()},selectType:function(t){this.selectedType=t,this.currentPage=1,this.orderList=[],this.hasMore=!0,this.loadOrderList()},getFieldValue:function(t,e){if(!t||!Array.isArray(t))return"";var a={account:"充值账户",amount:"充值金额",realname:"账户姓名",type:"运营商"}[e];if(!a)return"";var i=t.find((function(t){return t.label===a}));return i?i.value:""},loadOrderList:function(t){var e=this;this.loading||(this.loading=!0,getApp().getData("api/order/list",{page:this.currentPage,limit:10,type:this.selectedType},(function(a){if(e.loading=!1,"function"===typeof t&&t(),200===a.code){var i=a.data;1===e.currentPage?e.orderList=i.data||[]:e.orderList=e.orderList.concat(i.data||[]),e.lastPage=i.last_page,e.hasMore=i.current_page<i.last_page}else uni.showToast({title:a.msg||"获取订单列表失败",icon:"none"})}),(function(a){e.loading=!1,"function"===typeof t&&t(),console.error("获取订单列表失败:",a),uni.showToast({title:"网络错误，请重试",icon:"none"})})))},loadMore:function(){this.hasMore&&!this.loading&&(this.currentPage>=this.lastPage?this.hasMore=!1:(this.currentPage++,this.loadOrderList()))},cancelOrder:function(t){var e=this;uni.showModal({title:"确认取消",content:"确定要取消这个订单吗？",success:function(a){a.confirm&&e.performCancelOrder(t)}})},performCancelOrder:function(t){var e=this,a=getApp().getCache("userInfo"),i=a?a.token:null;i?(uni.showLoading({title:"取消中..."}),uni.request({url:getApp().globalData.baseUrl+"api/order/cancel",method:"POST",header:{token:i,"Content-Type":"application/json"},data:{id:t.id,type:t.type},success:function(t){uni.hideLoading(),200===t.data.code?(uni.showToast({title:"取消成功",icon:"success"}),e.currentPage=1,e.orderList=[],e.hasMore=!0,e.loadOrderList()):uni.showToast({title:t.data.msg||"取消失败",icon:"none"})},fail:function(){uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none"})}})):uni.showToast({title:"请先登录",icon:"none"})},payOrder:function(t){var e=this;uni.showActionSheet({itemList:["余额支付","微信支付","支付宝支付"],success:function(a){var i=[0,1,2][a.tapIndex];e.performPayOrder(t,i)}})},performPayOrder:function(t,e){var a=this,i=getApp().getCache("userInfo"),n=i?i.token:null;n?(uni.showLoading({title:"处理支付中..."}),uni.request({url:getApp().globalData.baseUrl+"api/order/pay",method:"POST",header:{token:n,"Content-Type":"application/json"},data:{id:t.id,paytype:e,type:t.type},success:function(t){uni.hideLoading(),200===t.data.code?0===e?(uni.showToast({title:"支付成功",icon:"success"}),a.currentPage=1,a.orderList=[],a.hasMore=!0,a.loadOrderList()):a.handlePaymentResult(t.data.data,e):401===t.data.code?uni.showToast({title:t.data.msg,icon:"none"}):uni.showToast({title:t.data.msg||"支付失败",icon:"none"})},fail:function(){uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none"})}})):uni.showToast({title:"请先登录",icon:"none"})},handlePaymentResult:function(t,e){3===e?uni.showModal({title:"USDT支付信息",content:"汇率: ".concat(t.exchange_rate,"\n地址: ").concat(t.usdt_address,"\n金额: ").concat(t.usdt_money," USDT"),showCancel:!1,confirmText:"确定"}):t.payUrl&&uni.showModal({title:"支付提示",content:"请在新页面完成支付",showCancel:!1,confirmText:"确定",success:function(e){e.confirm&&window.open(t.payUrl,"_blank")}})},formatTime:function(t){if(!t)return"";var e=new Date(1e3*t),a=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(a,"-").concat(i,"-").concat(n)},getStatusText:function(t,e){if("recharge_product"===e){return{0:"未支付",1:"已支付(待充值)",2:"充值中",3:"已付款",4:"充值成功",5:"充值失败",6:"退款成功",7:"退款中",8:"退款失败",9:"已过期",10:"已取消"}[t]||"未知状态"}return{1:"已下单",2:"已支付",3:"已取消",4:"支付中"}[t]||"未知状态"},getStatusClass:function(t,e){if("recharge"===e||"recharge_product"===e){if([0,1,2,4].includes(t))return"status-processing";if([3,4].includes(t))return"status-success";if([5,8,9,10].includes(t))return"status-failed";if([6,7].includes(t))return"status-refund"}else{if([1,4].includes(t))return"status-processing";if(2===t)return"status-success";if(3===t)return"status-failed"}return"status-default"},getPaymentText:function(t){return{0:"余额支付",1:"微信支付",2:"支付宝",3:"USDT支付",4:"后台下单"}[t]||"未知支付方式"},canCancel:function(t,e){return"recharge"===e||"recharge_product"===e?[0,1,2].includes(t):[1,4].includes(t)},canPay:function(t,e){return"recharge"===e||"recharge_product"===e?0===t:1===t}}};e.default=i},"8d69":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"order-page"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"back-icon"},[t._v("‹")])],1),a("v-uni-text",{staticClass:"header-title"},[t._v("我的订单")]),a("v-uni-view",{staticClass:"placeholder"})],1),a("v-uni-scroll-view",{staticClass:"order-types",attrs:{"scroll-x":"true","show-scrollbar":"false"}},[a("v-uni-view",{staticClass:"type-list"},[a("v-uni-view",{staticClass:"type-item",class:{active:"normal"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("normal")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("普通订单")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"expert"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("expert")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("选妃")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"recharge_product"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("recharge_product")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("充值")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"member_video"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("member_video")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("会员视频")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"game_recharge"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("game_recharge")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("游戏充值")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"game_withdrawal"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("game_withdrawal")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("游戏提现")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"loufeng_auth"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("loufeng_auth")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("楼凤认证")])],1),a("v-uni-view",{staticClass:"type-item",class:{active:"loufeng"===t.selectedType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectType("loufeng")}}},[a("v-uni-text",{staticClass:"type-text"},[t._v("楼凤预约")])],1)],1)],1),a("v-uni-view",{staticClass:"order-list"},[t.loading&&1===t.currentPage?a("v-uni-view",{staticClass:"loading-state"},[a("v-uni-text",{staticClass:"loading-text"},[t._v("加载中...")])],1):0===t.orderList.length?a("v-uni-view",{staticClass:"empty-state"},[a("v-uni-text",{staticClass:"empty-text"},[t._v("暂无订单")])],1):t._e(),t._l(t.orderList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"order-item"},[a("v-uni-view",{staticClass:"order-main"},[a("v-uni-view",{staticClass:"order-left"},["normal"===e.type?[a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(e.info_name||"普通会员"))]),a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(e.price))]),a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(t.formatTime(e.create_time)))])]:"recharge_product"===e.type?[e.fields&&e.fields.length>0?[t._l(e.fields,(function(e,i){return a("v-uni-text",{key:i,staticClass:"info-text"},[t._v(t._s(e.label)+": "+t._s(e.value))])})),a("v-uni-text",{staticClass:"info-text"},[t._v("时间："+t._s(t.formatTime(e.create_time)))])]:[a("v-uni-text",{staticClass:"info-text"},[t._v("商品："+t._s(e.info_name))]),a("v-uni-text",{staticClass:"info-text"},[t._v("金额：¥"+t._s(e.price))]),a("v-uni-text",{staticClass:"info-text"},[t._v("时间："+t._s(t.formatTime(e.create_time)))])]]:"member_video"===e.type||"game_recharge"===e.type||"game_withdrawal"===e.type?[a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(e.info_name))]),a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(e.price))]),a("v-uni-text",{staticClass:"info-text"},[t._v(t._s(t.formatTime(e.create_time)))])]:[a("v-uni-text",{staticClass:"info-text"},[t._v("订单："+t._s(e.info_name))]),a("v-uni-text",{staticClass:"info-text"},[t._v("金额：¥"+t._s(e.price))]),a("v-uni-text",{staticClass:"info-text"},[t._v("时间："+t._s(t.formatTime(e.create_time)))])]],2),a("v-uni-view",{staticClass:"order-right"},[a("v-uni-text",{staticClass:"status-text",class:t.getStatusClass(e.status,e.type)},[t._v(t._s(t.getStatusText(e.status,e.type)))])],1)],1),"1"==e.status?a("v-uni-view",{staticClass:"order-actions"},[a("v-uni-view",{staticClass:"action-btn cancel-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.cancelOrder(e)}}},[a("v-uni-text",{staticClass:"btn-text"},[t._v("取消支付")])],1),a("v-uni-view",{staticClass:"action-btn pay-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.payOrder(e)}}},[a("v-uni-text",{staticClass:"btn-text"},[t._v("去支付")])],1)],1):t._e()],1)})),t.hasMore?a("v-uni-view",{staticClass:"load-more"},[a("v-uni-text",{staticClass:"load-text"},[t._v("加载更多...")])],1):t.orderList.length>0?a("v-uni-view",{staticClass:"no-more"},[a("v-uni-text",{staticClass:"no-more-text"},[t._v("没有更多订单了")])],1):t._e()],2)],1)},n=[]},dc17:function(t,e,a){var i=a("3698");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("1a81d6e7",i,!0,{sourceMap:!1,shadowMode:!1})},eb7c:function(t,e,a){"use strict";a.r(e);var i=a("7c68"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);