(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-vip-vip"],{"0ac2":function(t,e,i){"use strict";var n=i("d9d2"),a=i.n(n);a.a},2908:function(t,e,i){"use strict";i.r(e);var n=i("f565"),a=i("7bd1");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("0ac2");var d=i("828b"),c=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"bdb6d2a8",null,!1,n["a"],void 0);e["default"]=c.exports},"7bd1":function(t,e,i){"use strict";i.r(e);var n=i("985b"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"985b":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("fcf3"));i("795c"),i("c223");var o={data:function(){return{newUserInfo:{},productList:[],selectedProductId:null,selectedProduct:null}},onLoad:function(){this.getProductList(),this.initUserInfo()},onShow:function(){var t=getApp().getCache("isLogin");getApp().isEmpty(t)&&uni.navigateTo({url:"/pages/login/login"})},methods:{initUserInfo:function(){var t=this,e=new Object,i=getApp().getCache("userInfo");e.token=i.token,getApp().getData("api/getuserinfo",e,(function(e){t.newUserInfo=e.data}))},goBack:function(){uni.navigateBack()},getProductList:function(){var t=this;getApp().getData("api/product/list",{},(function(e){200===e.code?t.productList=e.data||[]:uni.showToast({title:e.msg||"获取产品列表失败",icon:"none"})}))},selectProduct:function(t){this.selectedProductId=t.id,this.selectedProduct=t},formatExpireTime:function(t){if(!t)return"未开通会员";var e=new Date(1e3*t),i=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(i,"-").concat(n,"-").concat(a)},confirmPurchase:function(){var t=this;this.selectedProduct?uni.showModal({title:"确认开通",content:"确认开通".concat(this.selectedProduct.name,"会员？价格：¥").concat(this.selectedProduct.price),success:function(e){e.confirm&&t.createOrder()}}):uni.showToast({title:"请选择会员套餐",icon:"none"})},createOrder:function(){var t=this;uni.showLoading({title:"正在创建订单..."});var e=getApp().getCache("userInfo"),i={token:e.token,type:"normal",info_id:t.selectedProduct.id,amount:t.selectedProduct.price};getApp().getData("api/order/create",i,(function(e){200===e.code?t.processPayment(e.data):(uni.hideLoading(),uni.showModal({title:"提示",content:e.msg||"创建订单失败",showCancel:!1}))}),(function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"网络错误，请稍后重试",showCancel:!1}),console.error("创建订单网络错误:",t)}))},processPayment:function(t){var e=this,i=getApp().getCache("userInfo"),n={token:i.token,id:t,paytype:0,type:"normal"};getApp().getData("api/order/pay",n,(function(t){if(uni.hideLoading(),console.log("VIP支付返回结果:",t),console.log("状态码类型:",(0,a.default)(t.code),"状态码值:",t.code),200===t.code){var i=uni.getStorageSync("fromShortVideo");i&&(uni.setStorageSync("hasPurchasedVip",!0),uni.removeStorageSync("fromShortVideo")),uni.showModal({title:"开通成功",content:"恭喜您成功开通".concat(e.selectedProduct.name,"会员！"),showCancel:!1,success:function(){e.initUserInfo(),i&&uni.navigateBack()}})}else 402===t.code||402==t.code?(console.log("检测到402状态码，准备跳转充值页面"),uni.showToast({title:t.msg||"余额不足！",icon:"none"}),setTimeout((function(){console.log("开始跳转到充值页面"),uni.navigateTo({url:"/pages/recharge/recharge"})}),500)):uni.showModal({title:"开通失败",content:t.msg||"开通失败，请稍后重试",showCancel:!1})}),(function(t){uni.hideLoading(),uni.showModal({title:"开通失败",content:"网络错误，请稍后重试",showCancel:!1}),console.error("支付网络错误:",t)}))}}};e.default=o},cb85:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-bdb6d2a8]{color:#000;min-height:100%;background-image:none!important;background-color:#eee}body.?%PAGE?%[data-v-bdb6d2a8]{background-image:none!important;background-color:#eee}.vip-page[data-v-bdb6d2a8]{min-height:100vh;background:linear-gradient(180deg,#f8f9fa,#fff)}\n/* 头部导航 */.header[data-v-bdb6d2a8]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background:#fff;border-bottom:%?1?% solid #f0f0f0;position:-webkit-sticky;position:sticky;top:0;z-index:100}.back-btn[data-v-bdb6d2a8]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-bdb6d2a8]{width:%?40?%;height:%?40?%}.header .title[data-v-bdb6d2a8]{font-size:%?36?%;color:#333}.placeholder[data-v-bdb6d2a8]{width:%?60?%}\n/* 主要内容 */.content[data-v-bdb6d2a8]{padding:%?30?% 0}\n/* 会员等级区域 */.vip-level-section[data-v-bdb6d2a8]{margin-bottom:%?40?%}.level-card[data-v-bdb6d2a8]{background-color:#fff;border-radius:%?20?%;padding:%?40?%;display:flex;align-items:center}.vip-icon[data-v-bdb6d2a8]{width:%?120?%;height:%?60?%;margin-right:%?20?%}.level-text[data-v-bdb6d2a8]{font-size:%?32?%;color:#000}\n/* 到期时间区域 */.expire-section[data-v-bdb6d2a8]{background:#fff;border-radius:%?16?%;padding:%?30?%;margin-bottom:%?40?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.05);display:flex;align-items:center;height:%?100?%;line-height:%?100?%}.expire-label[data-v-bdb6d2a8]{font-size:%?32?%;color:#000}.expire-time[data-v-bdb6d2a8]{font-size:%?32?%;color:#000}\n/* 产品选择区域 */.product-section[data-v-bdb6d2a8]{margin-bottom:%?40?%;padding:%?30?%}.section-title[data-v-bdb6d2a8]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?30?%;display:block}.product-list[data-v-bdb6d2a8]{display:flex;justify-content:space-between}.product-item[data-v-bdb6d2a8]{background:#999;border:%?2?% solid #e0e0e0;border-radius:%?16?%;padding:%?30?%;display:flex;width:%?215?%;height:%?225?%;flex-direction:column;align-items:center;justify-content:space-around;transition:all .3s ease;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05)}.product-item.selected[data-v-bdb6d2a8]{border-color:#ff4757;background:#fd313d;color:#fff;box-shadow:0 %?8?% %?25?% rgba(255,71,87,.3)}.product-info[data-v-bdb6d2a8]{display:flex;flex-direction:column}.product-name[data-v-bdb6d2a8]{font-size:%?32?%;font-weight:700;color:#fff}.product-item.selected .product-name[data-v-bdb6d2a8]{color:#fff}.product-days[data-v-bdb6d2a8]{font-size:%?28?%;color:#666}.product-item.selected .product-days[data-v-bdb6d2a8]{color:hsla(0,0%,100%,.8)}.product-price[data-v-bdb6d2a8]{font-size:%?36?%;font-weight:700;color:#fff}.product-item.selected .product-price[data-v-bdb6d2a8]{color:#fff}\n/* 会员权益区域 */.benefits-section[data-v-bdb6d2a8]{margin-bottom:%?60?%}.benefits-list[data-v-bdb6d2a8]{background:#fff;border-radius:%?16?%;padding:%?30?%}.benefit-item[data-v-bdb6d2a8]{display:flex;align-items:center;padding:%?20?% 0}.benefit-item[data-v-bdb6d2a8]:last-child{border-bottom:none}.benefit-icon[data-v-bdb6d2a8]{width:%?40?%;height:%?40?%;margin-right:%?20?%}.benefit-text[data-v-bdb6d2a8]{font-size:%?30?%;color:#333}\n/* 确认按钮区域 */.confirm-section[data-v-bdb6d2a8]{position:fixed;bottom:0;left:0;right:0;padding:%?30?%;background:#fff}.confirm-btn[data-v-bdb6d2a8]{width:100%;height:%?100?%;background:linear-gradient(180deg,#fc303d 0,#fc1074);color:#fff;border:none;border-radius:%?15?%;font-size:%?34?%;line-height:%?100?%;font-weight:700;box-shadow:0 %?8?% %?25?% rgba(255,71,87,.3);transition:all .3s ease}.confirm-btn[data-v-bdb6d2a8]:disabled{background:#ccc;box-shadow:none}.confirm-btn[data-v-bdb6d2a8]:active:not(:disabled){-webkit-transform:translateY(%?2?%);transform:translateY(%?2?%);box-shadow:0 %?4?% %?15?% rgba(255,71,87,.3)}',""]),t.exports=e},d9d2:function(t,e,i){var n=i("cb85");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("38af4798",n,!0,{sourceMap:!1,shadowMode:!1})},f565:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"vip-page"},[i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"back-icon",attrs:{src:"/static/home/ic_common_back.png",mode:"aspectFit"}})],1),i("v-uni-text",{staticClass:"title"},[t._v("会员中心")]),i("v-uni-view",{staticClass:"placeholder"})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"vip-level-section"},[i("v-uni-view",{staticClass:"level-card"},[i("v-uni-text",{staticClass:"level-text"},[t._v("会员等级：")]),t.newUserInfo.vip>0?i("v-uni-image",{staticClass:"vip-icon",attrs:{src:"/static/icon/vip"+t.newUserInfo.vip+".jpg",mode:"aspectFit"}}):t._e()],1)],1),i("v-uni-view",{staticClass:"expire-section"},[i("v-uni-text",{staticClass:"expire-label"},[t._v("会员到期时间：")]),t.newUserInfo.vip>0?i("v-uni-text",{staticClass:"expire-time"},[t._v(t._s(t.formatExpireTime(t.newUserInfo.expire_time)))]):t._e()],1),i("v-uni-view",{staticClass:"bg-white"},[i("v-uni-view",{staticClass:"product-section"},[i("v-uni-view",{staticClass:"product-list"},t._l(t.productList,(function(e,n){return i("v-uni-view",{key:e.id,staticClass:"product-item",class:{selected:t.selectedProductId===e.id},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectProduct(e)}}},[i("v-uni-view",{staticClass:"product-info"},[i("v-uni-text",{staticClass:"product-name"},[t._v(t._s(e.name))])],1),i("v-uni-text",{staticClass:"product-price"},[t._v("¥"+t._s(e.price))])],1)})),1)],1),i("v-uni-view",{staticClass:"benefits-section"},[i("v-uni-view",{staticClass:"benefits-list"},[i("v-uni-view",{staticClass:"benefit-item"},[i("v-uni-text",{staticClass:"benefit-text"},[t._v("1、免费观看视频。")])],1),i("v-uni-view",{staticClass:"benefit-item"},[i("v-uni-text",{staticClass:"benefit-text"},[t._v("2、上传原创获得收益。")])],1),i("v-uni-view",{staticClass:"benefit-item"},[i("v-uni-text",{staticClass:"benefit-text"},[t._v("3、拥有预约达人资格。")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"confirm-section"},[i("v-uni-button",{staticClass:"confirm-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmPurchase.apply(void 0,arguments)}}},[t._v("确认开通")])],1)],1)],1)},a=[]}}]);