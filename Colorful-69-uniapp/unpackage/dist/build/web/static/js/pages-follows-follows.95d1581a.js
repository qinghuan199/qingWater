(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-follows-follows"],{"2de0":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"follows-page"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"back-icon",attrs:{src:"/static/home/ic_common_back.png",mode:"aspectFit"}})],1),a("v-uni-text",{staticClass:"header-title"},[t._v("我的关注")]),a("v-uni-view",{staticClass:"placeholder"})],1),a("v-uni-view",{staticClass:"tab-container"},[a("v-uni-view",{staticClass:"tab-item",class:{active:2===t.currentTab},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(2)}}},[a("v-uni-text",{staticClass:"tab-text"},[t._v("用户")])],1),a("v-uni-view",{staticClass:"tab-item",class:{active:1===t.currentTab},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(1)}}},[a("v-uni-text",{staticClass:"tab-text"},[t._v("达人")])],1),a("v-uni-view",{staticClass:"tab-item",class:{active:3===t.currentTab},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(3)}}},[a("v-uni-text",{staticClass:"tab-text"},[t._v("主播")])],1)],1),a("v-uni-view",{staticClass:"list-container"},[t.loading?a("v-uni-view",{staticClass:"loading-container"},[a("v-uni-text",{staticClass:"loading-text"},[t._v("加载中...")])],1):0===t.followsList.length?a("v-uni-view",{staticClass:"empty-container"},[a("v-uni-text",{staticClass:"empty-text"},[t._v(t._s(t.getEmptyText()))])],1):a("v-uni-view",[1===t.currentTab?a("v-uni-view",{staticClass:"grid-container"},t._l(t.followsList,(function(e){return a("v-uni-view",{key:e.id,staticClass:"grid-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goToExpertDetail(e)}}},[a("v-uni-image",{staticClass:"grid-avatar",attrs:{src:e.cover[0]||"/static/icon/default-avatar.png",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"grid-info"},[a("v-uni-text",{staticClass:"grid-name"},[t._v(t._s(e.name||"未知达人"))]),a("v-uni-view",{staticClass:"grid-popularity"},[a("v-uni-image",{staticClass:"fire-icon",attrs:{src:"/static/home/ic_hot.png",mode:"aspectFit"}}),a("v-uni-text",{staticClass:"popularity-num"},[t._v(t._s(e.num||"0"))])],1)],1)],1)})),1):t._e(),2===t.currentTab?a("v-uni-view",{staticClass:"expert-list"},t._l(t.followsList,(function(e){return a("v-uni-view",{key:e.id,staticClass:"expert-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goToUserProfile(e)}}},[a("v-uni-image",{staticClass:"expert-avatar",attrs:{src:e.header_img||"/static/icon/default-avatar.png",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"expert-info"},[a("v-uni-text",{staticClass:"expert-name"},[t._v(t._s(e.nickname||"未知用户"))])],1)],1)})),1):t._e()],1),t.hasMore&&!t.loading?a("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"load-more-text"},[t._v("加载更多")])],1):t._e()],1)],1)},n=[]},"30f7":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("7a76"),a("c9b5")},"3e66":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("795c");var n=i(a("b7c7")),o={data:function(){return{currentTab:1,followsList:[],loading:!1,currentPage:1,hasMore:!0,limit:10}},onPullDownRefresh:function(){this.currentPage=1,this.hasMore=!0,this.loadFollowsList((function(){uni.stopPullDownRefresh()}))},onLoad:function(){this.loadFollowsList()},onShow:function(){var t=getApp().getCache("isLogin");getApp().isEmpty(t)&&uni.navigateTo({url:"/pages/login/login"})},methods:{goBack:function(){uni.navigateBack()},switchTab:function(t){this.currentTab!==t&&(this.currentTab=t,this.currentPage=1,this.hasMore=!0,this.followsList=[],this.loadFollowsList())},loadFollowsList:function(t){var e=this;if(!this.loading){if(3===this.currentTab)return this.followsList=[],void(this.hasMore=!1);var a=getApp().getCache("userInfo"),i=a?a.token:null;if(i){var o;this.loading=!0,1===this.currentTab?o="api/favorite/list":2===this.currentTab&&(o="api/member/my/follows");var r={page:this.currentPage,limit:this.limit};1===this.currentTab&&(r.type=1),getApp().getData(o,r,(function(a){if(e.loading=!1,200===a.code){var i=a.data,o=i.data||[];1===e.currentPage?e.followsList=o:e.followsList=[].concat((0,n.default)(e.followsList),(0,n.default)(o)),e.hasMore=e.currentPage<i.last_page}else uni.showToast({title:a.msg||"获取关注列表失败",icon:"none"});t&&t()}),(function(){e.loading=!1,uni.showToast({title:"网络错误",icon:"none"}),t&&t()}))}else uni.showToast({title:"请先登录",icon:"none"})}},loadMore:function(){this.hasMore&&!this.loading&&(this.currentPage++,this.loadFollowsList())},formatTime:function(t){if(!t)return"";var e=new Date(1e3*t),a=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(a,"-").concat(i,"-").concat(n)},goToExpertDetail:function(t){uni.navigateTo({url:"/pages/expert-detail/expert-detail?id=".concat(t.id)})},goToUserProfile:function(t){uni.navigateTo({url:"/pages/user-profile/user-profile?id=".concat(t.id)})},getEmptyText:function(){switch(this.currentTab){case 1:return"暂无关注的达人";case 2:return"暂无关注的用户";case 3:return"暂无数据";default:return"暂无数据"}}}};e.default=o},4509:function(t,e,a){var i=a("544f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("576c5efc",i,!0,{sourceMap:!1,shadowMode:!1})},4733:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,i.default)(t)};var i=function(t){return t&&t.__esModule?t:{default:t}}(a("8d0b"))},"541e":function(t,e,a){"use strict";var i=a("4509"),n=a.n(i);n.a},"544f":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'.follows-page[data-v-472ab62e]{background-color:#eee;min-height:100vh}.header[data-v-472ab62e]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #eee;position:-webkit-sticky;position:sticky;top:0;z-index:999}.back-btn[data-v-472ab62e]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-472ab62e]{width:%?40?%;height:%?40?%}.header-title[data-v-472ab62e]{font-size:%?36?%;color:#333}.placeholder[data-v-472ab62e]{width:%?60?%}\n\n/* 标签页样式 */.tab-container[data-v-472ab62e]{display:flex;background-color:#eee;border-bottom:%?1?% solid #eee;padding:0 %?30?%;position:-webkit-sticky;position:sticky;top:%?88?%; /* header高度 */z-index:999}.tab-item[data-v-472ab62e]{flex:1;padding:%?30?% 0;text-align:center;position:relative}.tab-item.active .tab-text[data-v-472ab62e]{color:#fd3642;font-weight:700}.tab-item.active[data-v-472ab62e]::after{content:"";position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?60?%;height:%?4?%;border-radius:%?2?%}.tab-text[data-v-472ab62e]{font-size:%?30?%;color:#666;transition:color .3s}.loading-container[data-v-472ab62e],\n.empty-container[data-v-472ab62e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% 0}.loading-text[data-v-472ab62e]{font-size:%?28?%;color:#666}.empty-text[data-v-472ab62e]{font-size:%?28?%;color:#999}\n\n/* 网格布局样式 */.grid-container[data-v-472ab62e]{display:flex;flex-wrap:wrap;justify-content:space-between}.grid-item[data-v-472ab62e]{width:100%;margin-bottom:%?10?%;overflow:hidden}.grid-avatar[data-v-472ab62e]{width:100%;height:%?350?%;border-radius:%?15?%;margin-bottom:%?15?%}.grid-info[data-v-472ab62e]{display:flex;justify-content:space-between;align-items:center;padding:0 %?20?% %?20?% %?20?%}.grid-name[data-v-472ab62e]{font-size:%?28?%;font-weight:700;color:#333;max-width:%?120?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-popularity[data-v-472ab62e]{display:flex;align-items:center}.fire-icon[data-v-472ab62e]{width:%?24?%;height:%?24?%;margin-right:%?6?%}.popularity-num[data-v-472ab62e]{font-size:%?24?%;color:#000}.expert-phone[data-v-472ab62e]{font-size:%?26?%;color:#666}\n\n/* 视频列表样式 */.video-list[data-v-472ab62e]{display:flex;flex-direction:column;gap:%?20?%}.video-item[data-v-472ab62e]{display:flex;align-items:center;padding:%?30?%;background-color:#fff;border-radius:%?20?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.1)}.video-cover[data-v-472ab62e]{width:%?120?%;height:%?90?%;border-radius:%?12?%;margin-right:%?24?%}.video-info[data-v-472ab62e]{flex:1;display:flex;flex-direction:column}.video-title[data-v-472ab62e]{font-size:%?30?%;font-weight:500;color:#333;line-height:1.4}\n\n/* 短视频网格样式 */.grid-container[data-v-472ab62e]{display:grid;grid-template-columns:repeat(2,1fr);gap:%?10?%}.grid-item[data-v-472ab62e]{border-radius:%?20?%;display:flex;flex-direction:column;align-items:center;text-align:center}.grid-info[data-v-472ab62e]{display:flex;align-items:center;width:100%}.grid-name[data-v-472ab62e]{font-size:%?28?%;font-weight:500;color:#333;margin-bottom:%?12?%;text-align:center;line-height:1.3}.grid-popularity[data-v-472ab62e]{display:flex;align-items:center;justify-content:center;gap:%?8?%}.fire-icon[data-v-472ab62e]{width:%?24?%;height:%?24?%}.popularity-num[data-v-472ab62e]{font-size:%?24?%;color:#ff6b6b;font-weight:500}.load-more[data-v-472ab62e]{display:flex;align-items:center;justify-content:center;padding:%?30?%;margin-top:%?20?%}.load-more-text[data-v-472ab62e]{font-size:%?28?%;color:#007aff}.expert-item[data-v-472ab62e]{display:flex;align-items:center;padding:%?20?%;margin-bottom:%?10?%;background-color:#fff}.expert-avatar[data-v-472ab62e]{width:%?150?%;height:%?150?%;border-radius:50%}.expert-info[data-v-472ab62e]{margin-left:%?20?%}',""]),t.exports=e},"7ab6":function(t,e,a){"use strict";a.r(e);var i=a("3e66"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"99f2":function(t,e,a){"use strict";a.r(e);var i=a("2de0"),n=a("7ab6");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("541e");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"472ab62e",null,!1,i["a"],void 0);e["default"]=s.exports},b7c7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)||(0,n.default)(t)||(0,o.default)(t)||(0,r.default)()};var i=s(a("4733")),n=s(a("d14d")),o=s(a("5d6b")),r=s(a("30f7"));function s(t){return t&&t.__esModule?t:{default:t}}}}]);