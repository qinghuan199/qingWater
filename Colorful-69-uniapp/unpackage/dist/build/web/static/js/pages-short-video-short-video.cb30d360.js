(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-short-video-short-video"],{"0174":function(t,e,i){"use strict";i.r(e);var n=i("46cf"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"46cf":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("2634")),a=n(i("2fdc"));i("e966"),i("bf0f"),i("2797"),i("0c26"),i("5c47"),i("c223"),i("795c"),i("c9b5"),i("ab80");var s={data:function(){return{videoList:[],currentIndex:0,isPlaying:{},showCommentModal:!1,currentVideo:{},commentText:"",commentList:[],commentLoading:!1,currentTime:{},duration:{},isFullscreen:!1,isTouching:!1,progressBarRect:null,followLoading:!1,userInfo:{},vipCheckTimer:null,currentVideoInfo:{},hasCheckedVip:{}}},onLoad:function(t){var e=this;if(t.index&&(this.currentIndex=parseInt(t.index)),t.videoList)try{this.videoList=JSON.parse(decodeURIComponent(t.videoList))}catch(i){console.error("解析视频列表失败:",i),this.videoList=[]}this.videoList.forEach((function(t,i){e.$set(e.isPlaying,i,i===e.currentIndex)}))},onReady:function(){var t=this;this.$nextTick((function(){t.playVideo(t.currentIndex)}))},onShow:function(){var t=this;return(0,a.default)((0,o.default)().mark((function e(){var i,n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=getApp().getCache("isLogin"),!getApp().isEmpty(i)){e.next=4;break}return uni.navigateTo({url:"/pages/login/login"}),e.abrupt("return");case 4:if(n=uni.getStorageSync("hasPurchasedVip"),!n){e.next=10;break}return uni.removeStorageSync("hasPurchasedVip"),t.hasCheckedVip={},t.playVideo(t.currentIndex),e.abrupt("return");case 10:return e.prev=10,e.next=13,t.getUserInfo();case 13:t.userInfo&&t.userInfo.vip&&0!==t.userInfo.vip&&(t.hasCheckedVip={},t.playVideo(t.currentIndex)),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](10),console.error("获取用户信息失败:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})))()},onUnload:function(){var t=this;this.videoList.forEach((function(e,i){t.pauseVideo(i)})),this.vipCheckTimer&&(clearTimeout(this.vipCheckTimer),this.vipCheckTimer=null)},methods:{goBack:function(){uni.navigateBack()},onSwiperChange:function(t){var e=t.detail.current;this.pauseVideo(this.currentIndex),this.currentIndex=e,this.$set(this.hasCheckedVip,e,!1),this.playVideo(e)},playVideo:function(t){var e=uni.createVideoContext("video-"+t,this);e&&(e.play(),this.$set(this.isPlaying,t,!0))},pauseVideo:function(t){var e=uni.createVideoContext("video-"+t,this);e&&(e.pause(),this.$set(this.isPlaying,t,!1))},togglePlay:function(t){if(this.isPlaying[t])this.pauseVideo(t);else{var e=this.currentTime[t]||0;if(e>=15&&this.hasCheckedVip[t]&&this.userInfo&&(0===this.userInfo.vip||!this.userInfo.vip)){var i=this.videoList[t];if(1!==i.is_node)return void this.showVipModalDialog()}this.playVideo(t)}},onVideoPlay:function(t){var e=this;return(0,a.default)((0,o.default)().mark((function i(){return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.$set(e.isPlaying,t,!0),i.prev=1,i.next=4,e.getUserInfo();case 4:i.next=10;break;case 6:i.prev=6,i.t0=i["catch"](1),console.error("获取用户信息失败:",i.t0),e.userInfo||(e.userInfo={vip:0});case 10:e.currentVideoInfo=e.videoList[t],e.vipCheckTimer&&clearTimeout(e.vipCheckTimer),e.vipCheckTimer=setTimeout((function(){e.checkVipStatus(t)}),15e3);case 13:case"end":return i.stop()}}),i,null,[[1,6]])})))()},onVideoPause:function(t){this.$set(this.isPlaying,t,!1),this.vipCheckTimer&&(clearTimeout(this.vipCheckTimer),this.vipCheckTimer=null)},toggleLike:function(t){var e=getApp().getCache("isLogin");if("1"!=e)return uni.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1e3);var i=1===t.is_likenumber?2:1,n={type:3,info_id:t.id,operate:i};getApp().getData("api/likenumber/operate",n,(function(e){200==e.code?(uni.showToast({title:1===i?"点赞成功":"取消点赞",icon:"success",duration:1e3}),t.is_likenumber=1===i?1:0,t.likenumber=1===i?(t.likenumber||0)+1:Math.max((t.likenumber||0)-1,0),uni.$emit("shortVideoListRefresh")):uni.showToast({title:e.message,icon:"none"})}))},toggleFavorite:function(t){var e=getApp().getCache("isLogin");if("1"!=e)return uni.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1e3);var i=1===t.is_favorite?2:1,n={type:3,operate:i,info_id:t.id};getApp().getData("api/favorite/operate",n,(function(e){200==e.code?(uni.showToast({title:1===i?"收藏成功":"取消收藏",icon:"success"}),t.is_favorite=1===i?1:0,t.favorites+=1===i?1:-1,t.favorites<0&&(t.favorites=0),uni.$emit("shortVideoListRefresh")):uni.showToast({title:e.msg||"操作失败",icon:"none"})}))},toggleFollow:function(t){var e=getApp().getCache("isLogin");if("1"!=e)return uni.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1e3);var i={follow_id:t.member_id};getApp().getData("api/member/follow",i,(function(e){200==e.code?(t.is_follow=t.is_follow?0:1,uni.showToast({title:t.is_follow?"关注成功":"取消关注",icon:"success"}),uni.$emit("shortVideoListRefresh")):uni.showToast({title:e.msg||"操作失败",icon:"none"})}))},showComments:function(t){var e=getApp().getCache("isLogin");if("1"!=e)return uni.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1e3);this.currentVideo=t,this.showCommentModal=!0,this.getCommentList()},hideComments:function(){this.showCommentModal=!1,this.commentText="",this.commentList=[]},getCommentList:function(){var t=this,e={type:3,info_id:this.currentVideo.id,page:1,limit:50};getApp().getData("api/comments/info",e,(function(e){200==e.code?t.commentList=e.data.data||[]:console.log("获取评论列表失败:",e.msg)}))},sendComment:function(){var t=getApp().getCache("isLogin");if("1"!=t)return uni.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1e3);if(this.commentText.trim()){if(!this.commentLoading){this.commentLoading=!0;var e=this,i={type:3,operate:1,info_id:this.currentVideo.id,content:this.commentText.trim()};getApp().getData("api/comments/operate",i,(function(t){e.commentLoading=!1,200==t.code?(uni.showToast({title:"评论成功",icon:"success",duration:1e3}),e.commentText="",e.getCommentList(),e.currentVideo.comments?e.currentVideo.comments++:e.currentVideo.comments=1):uni.showToast({title:t.msg||"评论失败",icon:"none"})}))}}else uni.showToast({title:"请输入评论内容",icon:"none"})},shareVideo:function(t){uni.navigateTo({url:"/pages/promotion/promotion"})},goToUserProfile:function(t){uni.navigateTo({url:"/pages/user-profile/user-profile?id="+t.member_id})},onTimeUpdate:function(t,e){var i=e.detail.currentTime;if(this.$set(this.currentTime,t,i),i>=15&&!this.hasCheckedVip[t]){if(this.userInfo&&(0===this.userInfo.vip||!this.userInfo.vip)){var n=this.videoList[t];if(1!==n.is_node){this.pauseVideo(t);var o=uni.createVideoContext("video-"+t,this);o&&o.seek(15),this.currentVideoInfo=this.videoList[t],this.showVipModalDialog()}}this.$set(this.hasCheckedVip,t,!0)}},onLoadedMetadata:function(t,e){this.$set(this.duration,t,e.detail.duration)},onVideoEnded:function(t){this.$set(this.hasCheckedVip,t,!1)},getProgressWidth:function(t){var e=this.currentTime[t]||0,i=this.duration[t]||1,n=e/i*100;return n+"%"},onProgressTouchStart:function(t){var e=this;this.isTouching=!0,this.pauseVideo(this.currentIndex),uni.createSelectorQuery().in(this).select(".progress-bar").boundingClientRect((function(t){e.progressBarRect=t})).exec()},onProgressTouchMove:function(t){if(this.isTouching&&this.progressBarRect){var e=t.touches[0],i=e.clientX-this.progressBarRect.left,n=this.progressBarRect.width,o=i/n;o=Math.max(0,Math.min(1,o));var a=(this.duration[this.currentIndex]||0)*o;this.$set(this.currentTime,this.currentIndex,a)}},onProgressTouchEnd:function(t,e){var i=this;if(this.isTouching&&this.progressBarRect){var n=t.changedTouches[0],o=n.clientX-this.progressBarRect.left,a=this.progressBarRect.width,s=o/a;s=Math.max(0,Math.min(1,s));var r=(this.duration[e]||0)*s;if(r>=15&&!this.hasCheckedVip[e])return this.checkVipStatus(e),this.$set(this.hasCheckedVip,e,!0),this.isTouching=!1,void(this.progressBarRect=null);if(r>=15&&this.userInfo&&(0===this.userInfo.vip||!this.userInfo.vip)){var c=this.videoList[e];if(1!==c.is_node)return this.showVipModalDialog(),this.isTouching=!1,void(this.progressBarRect=null)}var d=uni.createVideoContext("video-"+e,this);d&&(d.seek(r),setTimeout((function(){i.playVideo(e)}),100)),this.isTouching=!1,this.progressBarRect=null}},seekTo:function(t,e){var i=this;this.isTouching||uni.createSelectorQuery().in(this).select(".progress-bar").boundingClientRect((function(n){var o=t.detail.x-n.left,a=n.width,s=o/a;s=Math.max(0,Math.min(1,s));var r=(i.duration[e]||0)*s;if(r>=15&&!i.hasCheckedVip[e])return i.checkVipStatus(e),void i.$set(i.hasCheckedVip,e,!0);if(r>=15&&i.userInfo&&(0===i.userInfo.vip||!i.userInfo.vip)){var c=i.videoList[e];if(1!==c.is_node)return void i.showVipModalDialog()}var d=uni.createVideoContext("video-"+e,i);d&&d.seek(r)})).exec()},formatTime:function(t){var e=Math.floor(t/60),i=Math.floor(t%60);return"".concat(e.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))},formatCommentTime:function(t){if(!t)return"";var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},getUserInfo:function(){var t=this;return new Promise((function(e,i){var n=t,o=new Object,a=getApp().getCache("userInfo");if(!a||!a.token)return console.error("用户token不存在"),void i("用户token不存在");o.token=a.token,getApp().getData("api/getuserinfo",o,(function(t){t?(n.userInfo=t.data,e(n.userInfo)):(console.error("获取用户信息失败，响应数据格式错误"),i("响应数据格式错误"))}),(function(t){console.error("获取用户信息API调用失败:",t),i(t)}))}))},checkVipStatus:function(t){if(this.userInfo){var e=this.videoList[t];if(1!==e.is_node&&(0===this.userInfo.vip||!this.userInfo.vip)){this.pauseVideo(t);var i=uni.createVideoContext("video-"+t,this);i&&i.seek(15),this.currentVideoInfo=this.videoList[t],this.showVipModalDialog()}}else console.log("用户信息未加载，跳过VIP检查")},buyVip:function(){uni.setStorageSync("fromShortVideo",!0),uni.navigateTo({url:"/pages/vip/vip"})},buyCurrentVideo:function(){var t=this,e=getApp().getCache("userInfo"),i=e?e.token:null;i?uni.request({url:getApp().globalData.baseUrl+"api/order/create",method:"POST",header:{token:i},data:{type:"member_video",info_id:this.currentVideoInfo.id,amount:this.currentVideoInfo.amount||"2.00"},success:function(e){200===e.data.code?t.payForVideo(e.data.data):uni.showToast({title:e.data.msg||"创建订单失败",icon:"none"})},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}}):uni.showToast({title:"请先登录",icon:"none"})},payForVideo:function(t){var e=this,i=getApp().getCache("userInfo"),n=i?i.token:null;uni.request({url:getApp().globalData.baseUrl+"api/order/pay",method:"POST",header:{token:n},data:{id:t,paytype:0,type:"normal"},success:function(t){200===t.data.code?(uni.showToast({title:"支付成功",icon:"success"}),e.$set(e.videoList[e.currentIndex],"is_node",1),e.$set(e.hasCheckedVip,e.currentIndex,!1),e.playVideo(e.currentIndex)):402===t.data.code?(uni.showToast({title:t.data.msg||"余额不足！",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/recharge/recharge"})}),500)):uni.showToast({title:t.data.msg||"支付失败",icon:"none"})},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}})},showVipModalDialog:function(){var t=this;uni.showModal({title:"温馨提示",content:"1：购买会员可以观看全部付费视频\n2：支付2.00元观看此片",confirmText:"购买本视频",cancelText:"购买会员",success:function(e){e.confirm?t.buyCurrentVideo():e.cancel&&t.buyVip()}})}}};e.default=s},7254:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".short-video-page[data-v-d8c1814e]{width:100vw;height:100vh;background-color:#000;position:relative}.video-swiper[data-v-d8c1814e]{width:100%;height:100%}.video-item[data-v-d8c1814e]{width:100%;height:100%;position:relative}.video-player[data-v-d8c1814e]{width:100%;height:100vh;object-fit:cover;position:absolute;top:0;left:0;z-index:1}.play-overlay[data-v-d8c1814e]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?120?%;height:%?120?%;\n\t/* background-color: rgba(0, 0, 0, 0.6); */border-radius:%?60?%;display:flex;align-items:center;justify-content:center;z-index:10}.play-icon[data-v-d8c1814e]{width:%?60?%;height:%?60?%}\n\n/* 右侧操作栏 */.right-actions[data-v-d8c1814e]{position:absolute;right:%?20?%;bottom:%?200?%;display:flex;flex-direction:column;align-items:center;z-index:10}.user-avatar[data-v-d8c1814e]{position:relative;margin-bottom:%?60?%}.avatar-img[data-v-d8c1814e]{width:%?100?%;height:%?100?%;border-radius:%?50?%;border:%?4?% solid #fff}.follow-btn[data-v-d8c1814e]{position:absolute;bottom:%?-10?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?35?%;height:%?35?%;background-color:#ff4757;border-radius:%?20?%;display:flex;align-items:center;justify-content:center}.follow-text[data-v-d8c1814e]{color:#fff;font-size:%?24?%;font-weight:700}.action-item[data-v-d8c1814e]{display:flex;flex-direction:column;align-items:center;margin-bottom:%?40?%}.action-icon[data-v-d8c1814e]{width:%?50?%;height:%?50?%;margin-bottom:%?10?%}\n\n/* 视频进度条样式 - 仿抖音风格 */.video-progress-container[data-v-d8c1814e]{position:absolute;bottom:%?20?%;left:0;right:0;z-index:10;padding:0 %?30?%;display:flex;align-items:center;gap:%?20?%}.progress-bar[data-v-d8c1814e]{position:relative;height:%?4?%;margin-bottom:0;cursor:pointer;padding:%?15?% 0;\n\t/* 增加触摸区域 */margin:%?-15?% 0 0 0;\n\t/* 抵消padding对布局的影响 */flex:1}.progress-bg[data-v-d8c1814e]{position:absolute;top:50%;left:0;width:100%;height:%?4?%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background-color:hsla(0,0%,100%,.2);border-radius:%?2?%}.progress-fill[data-v-d8c1814e]{position:absolute;top:50%;left:0;height:%?4?%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background-color:#fff;border-radius:%?2?%}.progress-thumb[data-v-d8c1814e]{position:absolute;top:50%;width:%?12?%;height:%?12?%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;border-radius:50%;box-shadow:0 %?2?% %?6?% rgba(0,0,0,.3)}.progress-bar.dragging .progress-thumb[data-v-d8c1814e]{width:%?16?%;height:%?16?%}\n\n/* 时长显示样式 */.time-display[data-v-d8c1814e]{flex-shrink:0}.time-text[data-v-d8c1814e]{font-size:%?24?%;color:hsla(0,0%,100%,.8);text-shadow:0 %?1?% %?2?% rgba(0,0,0,.5)}\n\n/* 拖拽状态下的进度条样式 */.progress-bar.dragging .progress-thumb[data-v-d8c1814e]{-webkit-transform:translate(-50%,-50%) scale(1.3);transform:translate(-50%,-50%) scale(1.3);box-shadow:0 %?4?% %?16?% rgba(0,0,0,.4);opacity:1}.progress-bar.dragging .progress-fill[data-v-d8c1814e]{transition:none}\n\n/* 悬停时显示拖拽点 */.progress-bar:active .progress-thumb[data-v-d8c1814e]{opacity:1}.action-text[data-v-d8c1814e]{color:#fff;font-size:%?24?%;text-align:center}\n\n/* 底部信息 */.bottom-info[data-v-d8c1814e]{position:absolute;bottom:%?150?%;left:%?30?%;right:%?150?%;z-index:10}.user-info[data-v-d8c1814e]{margin-bottom:%?20?%}.username[data-v-d8c1814e]{color:#fff;font-size:%?36?%;font-weight:700}.video-desc[data-v-d8c1814e]{max-height:%?120?%;overflow:hidden}.desc-text[data-v-d8c1814e]{color:#fff;font-size:%?28?%;line-height:1.4}\n\n/* 返回按钮 */.back-btn[data-v-d8c1814e]{position:absolute;top:%?50?%;left:%?30?%;width:%?60?%;height:%?60?%;background-color:rgba(0,0,0,.5);border-radius:%?30?%;display:flex;align-items:center;justify-content:center;z-index:10}.back-icon[data-v-d8c1814e]{width:%?40?%;height:%?40?%}\n\n/* 评论弹窗 */.comment-modal[data-v-d8c1814e]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.5);display:flex;align-items:flex-end;z-index:1000}.comment-content[data-v-d8c1814e]{width:100%;max-height:60vh;background-color:#fff;border-radius:%?30?% %?30?% 0 0;display:flex;flex-direction:column}.comment-header[data-v-d8c1814e]{display:flex;justify-content:space-between;align-items:center;padding:%?30?%;border-bottom:%?1?% solid #f0f0f0}.comment-title[data-v-d8c1814e]{font-size:%?32?%;font-weight:700;color:#333}.close-btn[data-v-d8c1814e]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.close-text[data-v-d8c1814e]{font-size:%?40?%;color:#999}.comment-list[data-v-d8c1814e]{flex:1;max-height:%?600?%;padding:0 %?30?%}.comment-item[data-v-d8c1814e]{padding:%?30?% 0;border-bottom:%?1?% solid #f5f5f5}.comment-user[data-v-d8c1814e]{display:flex;align-items:center;margin-bottom:%?20?%}.avatar-container[data-v-d8c1814e]{position:relative;margin-right:%?20?%}.comment-user-avatar[data-v-d8c1814e]{width:%?60?%;height:%?60?%;border-radius:50%}.user-info[data-v-d8c1814e]{flex:1}.user-name[data-v-d8c1814e]{font-size:%?28?%;color:#333;display:block;margin-bottom:%?10?%}.comment-time[data-v-d8c1814e]{font-size:%?24?%;color:#999;display:block}.comment-content-text[data-v-d8c1814e]{font-size:%?28?%;color:#666;line-height:1.5}.empty-comments[data-v-d8c1814e]{display:flex;justify-content:center;align-items:center;height:%?300?%}.empty-text[data-v-d8c1814e]{font-size:%?28?%;color:#999}.width-70[data-v-d8c1814e]{width:%?70?%;height:auto;margin-left:%?10?%}.u-flex[data-v-d8c1814e]{display:flex;align-items:center}.comment-input[data-v-d8c1814e]{display:flex;align-items:center;padding:%?20?% %?30?%;border-top:%?1?% solid #f0f0f0}.input-box[data-v-d8c1814e]{flex:1;height:%?80?%;padding:0 %?20?%;background-color:#f5f5f5;border-radius:%?40?%;font-size:%?28?%}.send-btn[data-v-d8c1814e]{margin-left:%?20?%;padding:%?20?% %?30?%;background-color:#007aff;border-radius:%?40?%}.send-text[data-v-d8c1814e]{color:#fff;font-size:%?28?%}",""]),t.exports=e},"983d":function(t,e,i){"use strict";var n=i("eaf7"),o=i.n(n);o.a},a2c7:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"short-video-page"},[i("v-uni-swiper",{staticClass:"video-swiper",attrs:{current:t.currentIndex,vertical:!0,"indicator-dots":!1,autoplay:!1,circular:!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwiperChange.apply(void 0,arguments)}}},t._l(t.videoList,(function(e,n){return i("v-uni-swiper-item",{key:e.id,staticClass:"video-item"},[i("v-uni-video",{staticClass:"video-player",attrs:{id:"video-"+n,src:e.url,poster:e.cover,controls:!1,autoplay:n===t.currentIndex,loop:!0,muted:!1},on:{play:function(e){arguments[0]=e=t.$handleEvent(e),t.onVideoPlay(n)},pause:function(e){arguments[0]=e=t.$handleEvent(e),t.onVideoPause(n)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePlay(n)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.onTimeUpdate(n,e)},loadedmetadata:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoadedMetadata(n,e)},ended:function(e){arguments[0]=e=t.$handleEvent(e),t.onVideoEnded(n)}}}),n===t.currentIndex?i("v-uni-view",{staticClass:"video-progress-container"},[i("v-uni-view",{staticClass:"time-display"},[i("v-uni-text",{staticClass:"time-text"},[t._v(t._s(t.formatTime(t.currentTime[n]||0)))])],1),i("v-uni-view",{staticClass:"progress-bar",class:{dragging:t.isTouching},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onProgressTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.onProgressTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.onProgressTouchEnd(e,n)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.seekTo(e,n)}}},[i("v-uni-view",{staticClass:"progress-bg"}),i("v-uni-view",{staticClass:"progress-fill",style:{width:t.getProgressWidth(n)}}),i("v-uni-view",{staticClass:"progress-thumb",style:{left:t.getProgressWidth(n)}})],1),i("v-uni-view",{staticClass:"time-display"},[i("v-uni-text",{staticClass:"time-text"},[t._v(t._s(t.formatTime(t.duration[n]||0)))])],1)],1):t._e(),t.isPlaying[n]?t._e():i("v-uni-view",{staticClass:"play-overlay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePlay(n)}}},[i("v-uni-image",{staticClass:"play-icon",attrs:{src:"/static/home/ic_play.png",mode:"aspectFit"}})],1),i("v-uni-view",{staticClass:"right-actions"},[i("v-uni-view",{staticClass:"user-avatar",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goToUserProfile(e)}}},[i("v-uni-image",{staticClass:"avatar-img",attrs:{src:e.header_img||"/static/icon/default-avatar.png",mode:"aspectFill"}}),e.is_follow?t._e():i("v-uni-view",{staticClass:"follow-btn",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toggleFollow(e)}}},[i("v-uni-text",{staticClass:"follow-text"},[t._v("+")])],1)],1),i("v-uni-view",{staticClass:"action-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toggleLike(e)}}},[i("v-uni-image",{staticClass:"action-icon",attrs:{src:e.is_likenumber?"/static/home/ic_plaza_like_select.png":"/static/home/ic_plaza_like_normal.png",mode:"aspectFit"}}),i("v-uni-text",{staticClass:"action-text"},[t._v(t._s(e.likenumber||"0"))])],1),i("v-uni-view",{staticClass:"action-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showComments(e)}}},[i("v-uni-image",{staticClass:"action-icon",attrs:{src:"/static/home/ic_plaza_comment.png",mode:"aspectFit"}}),i("v-uni-text",{staticClass:"action-text"},[t._v(t._s(e.comments||"0"))])],1),i("v-uni-view",{staticClass:"action-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toggleFavorite(e)}}},[i("v-uni-image",{staticClass:"action-icon",attrs:{src:e.is_favorite?"/static/home/ic_plaza_collect_select.png":"/static/home/ic_plaza_collect_normal.png",mode:"aspectFit"}}),i("v-uni-text",{staticClass:"action-text"},[t._v(t._s(e.favorites||"0"))])],1),i("v-uni-view",{staticClass:"action-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.shareVideo(e)}}},[i("v-uni-image",{staticClass:"action-icon",attrs:{src:"/static/home/ic_plaza_share.png",mode:"aspectFit"}})],1)],1),i("v-uni-view",{staticClass:"bottom-info"},[i("v-uni-view",{staticClass:"user-info"},[i("v-uni-text",{staticClass:"username"},[t._v(t._s(e.member_nickname||"未知用户"))])],1),i("v-uni-view",{staticClass:"video-desc"},[i("v-uni-text",{staticClass:"desc-text"},[t._v(t._s(e.name||"暂无描述"))])],1)],1),n===t.currentIndex?i("v-uni-view",{staticClass:"back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"back-icon",attrs:{src:"/static/home/left.png",mode:"widthFix"}})],1):t._e()],1)})),1),t.showCommentModal?i("v-uni-view",{staticClass:"comment-modal",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideComments.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"comment-content",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"comment-header"},[i("v-uni-text",{staticClass:"comment-title"},[t._v("评论 ("+t._s(t.commentList.length)+")")]),i("v-uni-view",{staticClass:"close-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideComments.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"close-text"},[t._v("×")])],1)],1),t.commentList.length>0?i("v-uni-scroll-view",{staticClass:"comment-list",attrs:{"scroll-y":"true"}},t._l(t.commentList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"comment-item"},[i("v-uni-view",{staticClass:"comment-user"},[i("v-uni-view",{staticClass:"avatar-container"},[i("v-uni-image",{staticClass:"comment-user-avatar",attrs:{src:e.header_img,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"u-flex"},[i("v-uni-text",{staticClass:"user-name"},[t._v(t._s(e.member_name))]),e.vip&&e.vip>0?i("v-uni-image",{staticClass:"width-70",attrs:{src:"/static/icon/vip"+e.vip+".jpg",mode:"widthFix"}}):t._e()],1),i("v-uni-view",{staticClass:"comment-time"},[t._v(t._s(e.address)+"\n\t\t\t\t\t\t\t\t"+t._s(t.formatCommentTime(e.create_time)))])],1)],1),i("v-uni-text",{staticClass:"comment-content-text"},[t._v(t._s(e.content))])],1)})),1):i("v-uni-view",{staticClass:"empty-comments"},[i("v-uni-text",{staticClass:"empty-text"},[t._v("暂无评论，快来抢沙发吧~")])],1),i("v-uni-view",{staticClass:"comment-input"},[i("v-uni-input",{staticClass:"input-box",attrs:{placeholder:"说点什么..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}}),i("v-uni-view",{staticClass:"send-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendComment.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"send-text"},[t._v("发送")])],1)],1)],1)],1):t._e()],1)},o=[]},d030:function(t,e,i){"use strict";i.r(e);var n=i("a2c7"),o=i("0174");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("983d");var s=i("828b"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"d8c1814e",null,!1,n["a"],void 0);e["default"]=r.exports},eaf7:function(t,e,i){var n=i("7254");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("967d").default;o("66b02a41",n,!0,{sourceMap:!1,shadowMode:!1})}}]);